#!/usr/bin/env bash

# This is a mock of the 'gh' CLI for testing purposes.

# --- MOCK BEHAVIOR ---
# This mock simulates the behavior of the 'gh' command by checking its arguments
# and printing the expected JSON output for different scenarios.

if [[ "$1" == "repo" && "$2" == "view" ]]; then
    # Simulate the command: gh repo view --json ... --jq ...
    # The key is to return the JSON *after* the --jq filter has been applied,
    # as this is what the stgit script expects to receive.
    echo '{
        "owner": "test-user",
        "name": "test-repo",
        "base": "main"
    }'
    exit 0
elif [[ "$1" == "auth" && "$2" == "status" ]]; then
    # Simulate a successful login status.
    exit 0
fi

# If the command is not one of the mocked ones, exit with an error.
echo "Error: Unmocked gh command received by mock: gh $*" >&2
exit 1

